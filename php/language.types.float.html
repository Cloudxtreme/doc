<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>浮点型</title>

 </head>
 <body><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="language.types.integer.html">整型</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="language.types.string.html">字符串</a></div>
 <div class="up"><a href="language.types.html">类型</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="language.types.float" class="sect1">
 <h2 class="title">浮点型</h2>

 <p class="para">
  浮点数（也叫浮点数，双精度数或实数）可以用以下任一语法定义：
 </p>

 <div class="informalexample">
  <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$a&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1.234</span><span style="color: #007700">;&nbsp;<br /></span><span style="color: #0000BB">$b&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1.2e3</span><span style="color: #007700">;&nbsp;<br /></span><span style="color: #0000BB">$c&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">7E-10</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
  </div>

 </div>

 <p class="para">
  浮点数的形式表示：
 </p>

 <div class="informalexample">
  <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
LNUM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[0-9]+<br />DNUM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;([0-9]*[\.]{LNUM})&nbsp;|&nbsp;({LNUM}[\.][0-9]*)<br />EXPONENT_DNUM&nbsp;[+-]?(({LNUM}&nbsp;|&nbsp;{DNUM})&nbsp;[eE][+-]?&nbsp;{LNUM})</span>
</code></div>
  </div>

 </div>

 <p class="para">
   浮点数的字长和平台相关，尽管通常最大值是 1.8e308 并具有 14 位十进制数字的精度（64
   位 IEEE 格式）。
 </p>

 <div class="warning"><b class="warning">Warning</b>
  <h1 class="title">关于浮点数精度的警告</h1>

  <p class="para">
    显然简单的十进制分数如同 <i>0.1</i> 或 <i>0.7</i>
    不能在不丢失一点点精度的情况下转换为内部二进制的格式。这就会造成混乱的结果：例如，<i>floor((0.1+0.7)*10)</i>
    通常会返回 <i>7</i> 而不是预期中的
    <i>8</i>，因为该结果内部的表示其实是类似 <i>7.<span style="text-decoration: overline;">9</span></i>。
  </p>

  <p class="para">
    这和一个事实有关，那就是不可能精确的用有限位数表达某些十进制分数。例如，十进制的
    <i>1/3</i> 变成了 <i>0.<span style="text-decoration: overline;">3</span></i>。
  </p>

  <p class="para">
    所以永远不要相信浮点数结果精确到了最后一位，也永远不要比较两个浮点数是否相等。如果确实需要更高的精度，应该使用<a href="ref.bc.html" class="link">任意精度数学函数</a>或者 <a href="ref.gmp.html" class="link">gmp 函数</a>。
  </p>
 </div>

 <div class="sect2" id="language.types.float.casting">
  <h3 class="title">转换为浮点数</h3>
  
  <p class="para">
    如果希望了解有关何时和如何将字符串转换成浮点数的信息，请查阅“<a href="language.types.string.html#language.types.string.conversion" class="link">将字符串转换为数值</a>”一节。对于其它类型的值，其情况类似于先将值转换成整型，然后再转换成浮点。请参阅“<a href="language.types.integer.html#language.types.integer.casting" class="link">转换为整型</a>”一节以获取更多信息。自
    PHP 5 起，如果试图将对象转换为浮点数，会发出一条 E_NOTICE 错误。
  </p>

 </div>
</div><hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="language.types.integer.html">整型</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="language.types.string.html">字符串</a></div>
 <div class="up"><a href="language.types.html">类型</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
